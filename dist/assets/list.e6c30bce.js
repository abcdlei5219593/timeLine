import{u as ae}from"./useTableSetting.198d7378.js";import{_ as de,d as oe,r as p,D as j,a as V,o as ne,y as r,b as g,c as v,f as u,w as t,e as b,F as $,G as I,l as C,j as c,g as z,z as ie,H as se,B as re,I as fe,J as pe,t as me}from"./index.4d3a0603.js";const Ee={class:"main-content"},ce={class:"data-type"},be={class:"btns"},Fe={class:"dialog-form"},xe={class:"dialog-footer"},Be=oe({__name:"list",setup(De){const{maxTableHeight:k,setTableMaxHeight:M}=ae({id:"userTable",offsetBottom:92}),y=p("first"),F=p(1),A=async a=>{F.value=a,setTimeout(()=>{k.value=M("userTable",92)},100)},R=j(()=>{let a=_.value.map(s=>s.id),e=[],i;for(let s=0;s<a.length;s++)s===0?(e.push(1),i=0):a[s]===a[s-1]?(e[i]+=1,e.push(0)):(e.push(1),i=s);return e}),Y=({row:a,column:e,rowIndex:i,columnIndex:s})=>{if(console.log(e.fixed+""+e.label),e.fixed)return{rowspan:R[i],colspan:1}},H=j(()=>{const a=[{label:"\u7269\u63A2\u70B9\u53F7",field:"wtdh",width:"140px",fixed:"left"},{label:"\u6570\u636E\u72B6\u6001",field:"sjzt",width:"140px",fixed:"left"},{label:"\u5904\u7406\u4EBA",field:"clr",width:"140px",fixed:"left"},{label:"\u7BA1\u7EBF\u6027\u8D28",field:"gxxz",width:"140px",edit:!0,fixed:!1},{label:"\u7279\u5F81",field:"tz",width:"140px",edit:!0,fixed:!1},{label:"\u9644\u5C5E\u7269",field:"fsw",width:"140px",edit:!0,fixed:!1},{label:"\u4E95\u5E95\u6DF1",field:"jds",width:"140px",edit:!0,fixed:!1},{label:"\u6C34\u6DF1",field:"ss",width:"140px",edit:!0,fixed:!1},{label:"\u6DE4\u6CE5\u6DF1",field:"yns",width:"140px",edit:!0,fixed:!1},{label:"\u4E95\u76D6\u72B6\u6001",field:"jgzt",width:"140px",edit:!0,fixed:!1},{label:"\u4E95\u76D6\u6750\u8D28",field:"jgcz",width:"140px",edit:!0,fixed:!1},{label:"\u5907\u6CE8",field:"bz",width:"140px",edit:!0,fixed:!1}],e=[{label:"\u9053\u8DEF",field:"wtdh",width:"140px",fixed:"left"},{label:"\u8D77\u6B62\u70B9\u53F7",field:"dh",width:"140px",fixed:"left"},{label:"\u6570\u636E\u72B6\u6001",field:"sjzt",width:"140px",fixed:"left"},{label:"\u5904\u7406\u4EBA",field:"clr",width:"140px",fixed:"left"},{label:"\u7BA1\u7EBF\u6027\u8D28",field:"gxxz",width:"140px",edit:!0},{label:"\u8D77\u70B9\u57CB\u6DF1",field:"fsw",width:"140px",edit:!0},{label:"\u7EC8\u70B9\u57CB\u6DF1",field:"zdms",width:"140px",edit:!0},{label:"\u8D77\u70B9\u7BA1\u5E95\u9AD8\u7A0B",field:"gc",width:"140px",edit:!0},{label:"\u7BA1\u5F84",field:"gj",width:"140px",edit:!0},{label:"\u6750\u8D28",field:"cz",width:"140px",edit:!0},{label:"\u6D41\u5411",field:"lx",width:"140px",edit:!0},{label:"\u57CB\u8BBE\u7C7B\u578B",field:"lx",width:"140px",edit:!0},{label:"\u5907\u6CE8",field:"bz",width:"140px",edit:!0}];let i=[1,2,3,4].map(f=>{const d={};return[...a,...e].forEach(E=>{d[E.field]=Math.random().toFixed(2)*1e3}),d.id=f,f===2&&(d.histroy=!0),d}),s={};return Object.keys(i[1]).forEach(f=>{const d=[...a,...e].find(m=>m.field===f);let E=d==null?void 0:d.edit;s[f]=E?i[1][f]+1:i[1][f]}),i.splice(2,0,s),_.value=i,F.value===1?a:e}),_=p([{code:"xc-001",name:"\u6D4B\u8BD5\u9879\u76EE",unit:"\u5355\u4F4D\u540D\u79F0",date:"2023-09-10",user:"\u5F20\u4E09",kaigong:"2023-09-10",status:1}]),h=p(!1),J=p(0),O=p(!1);p(!1),p("");const N=p(),T=p(),P=p({}),o=V({code:"",name:"",unit:"",date:"",user:"",status:"",pageNum:1,pageSize:20}),n=V({roleName:"",roleDesc:""}),L=V({roleName:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",trigger:"blur"}]}),B=async()=>{},q=a=>{P.value=JSON.parse(JSON.stringify(a))},G=a=>{a.resetFields(),o.pageNum=1,B()},K=a=>{o.pageNum=1,o.pageSize=a,B()},Q=a=>{o.pageNum=a,B()},W=async a=>{await re(a)},S=async a=>{},X=()=>{};return ne(()=>{B()}),(a,e)=>{const i=r("el-tab-pane"),s=r("el-tabs"),f=r("ElInput"),d=r("ElFormItem"),E=r("ElSelect"),m=r("ElButton"),U=r("ElForm"),w=r("ElTableColumn"),Z=r("ElTable"),ee=r("ElPagination"),x=r("el-input"),le=r("el-date-picker"),ue=r("ElDialog");return g(),v("div",Ee,[u(s,{modelValue:y.value,"onUpdate:modelValue":e[0]||(e[0]=l=>y.value=l),onTabClick:a.handleClick},{default:t(()=>[u(i,{label:"\u5929\u5E9C\u65B0\u533A\u9879\u76EE",name:"first"}),u(i,{label:"\u6B66\u4FAF\u533A\u9879\u76EE",name:"second"})]),_:1},8,["modelValue","onTabClick"]),b("section",ce,[b("div",{class:$([F.value===1?"active":"","tab-button"]),onClick:e[1]||(e[1]=l=>A(1))},"\u7BA1\u4E95\u6570\u636E",2),b("div",{class:$([F.value===2?"active":"","tab-button"]),onClick:e[2]||(e[2]=l=>A(2))},"\u7BA1\u7EBF\u6570\u636E",2)]),u(U,{ref_key:"searchFormRef",ref:T,inline:"",class:"search-form","label-width":"68px","label-position":"left"},{default:t(()=>[u(d,{label:"\u7269\u63A2\u70B9\u53F7"},{default:t(()=>[u(f,{modelValue:o.code,"onUpdate:modelValue":e[3]||(e[3]=l=>o.code=l),size:"default",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u6570\u636E\u72B6\u6001"},{default:t(()=>[u(E,{modelValue:o.user,"onUpdate:modelValue":e[4]||(e[4]=l=>o.user=l),size:"default",placeholder:"\u8BF7\u9009\u62E9"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u5904\u7406\u4EBA"},{default:t(()=>[u(f,{modelValue:o.name,"onUpdate:modelValue":e[5]||(e[5]=l=>o.name=l),size:"default",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u9053\u8DEF"},{default:t(()=>[u(f,{modelValue:o.unit,"onUpdate:modelValue":e[6]||(e[6]=l=>o.unit=l),size:"default",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),F.value===2?(g(),v(I,{key:0},[u(d,{label:"\u7BA1\u7EBF\u6027\u8D28"},{default:t(()=>[u(E,{modelValue:o.user,"onUpdate:modelValue":e[7]||(e[7]=l=>o.user=l),size:"default",placeholder:"\u8BF7\u9009\u62E9"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u9879\u76EE"},{default:t(()=>[u(E,{modelValue:o.status,"onUpdate:modelValue":e[8]||(e[8]=l=>o.status=l),size:"default",placeholder:"\u8BF7\u9009\u62E9"},null,8,["modelValue"])]),_:1})],64)):C("v-if",!0),u(d,null,{default:t(()=>[u(m,{size:"default",color:"#4371EE"},{default:t(()=>[c(" \u67E5\u8BE2 ")]),_:1}),u(m,{size:"default",plain:"",onClick:e[9]||(e[9]=l=>G(T.value))},{default:t(()=>[c(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},512),C(" </ElCol> "),b("div",be,[u(m,{class:"add-btn",color:"#4371EE",size:"default",icon:z(ie),onClick:e[10]||(e[10]=l=>h.value=!0)},{default:t(()=>[c(" \u65B0\u589E\u89D2\u8272 ")]),_:1},8,["icon"])]),u(Z,{border:"",id:"userTable",class:"table",data:_.value,height:z(k),"span-method":Y},{default:t(()=>[u(w,{type:"selection",width:"55px",fixed:"left"}),(g(!0),v(I,null,se(z(H),(l,D)=>(g(),fe(w,{key:D,fixed:l.fixed,prop:l.field,label:l.label,width:l.width},pe({_:2},[l.edit?{name:"default",fn:t(te=>[b("span",null,me(te.row[l.field]),1)]),key:"0"}:void 0]),1032,["fixed","prop","label","width"]))),128)),u(w,{fixed:"right",label:"\u64CD\u4F5C",width:"200"},{default:t(l=>[u(m,{link:"",type:"text",size:"default",onClick:D=>q(l.row)},{default:t(()=>[c(" \u8BE6\u60C5 ")]),_:2},1032,["onClick"]),u(m,{link:"",type:"text",size:"default",onClick:D=>S(l.row)},{default:t(()=>[c(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),u(m,{link:"",type:"text",size:"default",onClick:D=>S(l.row)},{default:t(()=>[c(" \u6210\u5458\u7BA1\u7406 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","height"]),u(ee,{class:"pagination",background:"",layout:"total,sizes,prev, pager, next,jumper",total:J.value,"current-page":o.pageNum,"page-sizes":[10,20,50,100],"page-size":o.pageSize,onSizeChange:K,onCurrentChange:Q},null,8,["total","current-page","page-size"]),C("\u65B0\u589E\u6216\u7F16\u8F91\u89D2\u8272"),u(ue,{modelValue:h.value,"onUpdate:modelValue":e[19]||(e[19]=l=>h.value=l),title:O.value?"\u7F16\u8F91\u9879\u76EE":"\u521B\u5EFA\u9879\u76EE",width:"480px"},{footer:t(()=>[b("span",xe,[u(m,{size:"default",onClick:X},{default:t(()=>[c("\u53D6 \u6D88")]),_:1}),u(m,{color:"#4371EE",size:"default",onClick:e[18]||(e[18]=l=>W(N.value))},{default:t(()=>[c("\u63D0 \u4EA4")]),_:1})])]),default:t(()=>[b("div",Fe,[u(U,{ref_key:"addFormRef",ref:N,model:n,rules:L,"label-width":"80px","label-position":"left"},{default:t(()=>[u(d,{label:"\u9879\u76EE\u7F16\u53F7",prop:"roleName"},{default:t(()=>[u(x,{modelValue:n.code,"onUpdate:modelValue":e[11]||(e[11]=l=>n.code=l),size:"default",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",maxlength:"10"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u9879\u76EE\u540D\u79F0",prop:"roleName"},{default:t(()=>[u(x,{modelValue:n.name,"onUpdate:modelValue":e[12]||(e[12]=l=>n.name=l),size:"default",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",maxlength:"10"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u59D4\u6258\u5355\u4F4D",prop:"roleName"},{default:t(()=>[u(x,{modelValue:n.unit,"onUpdate:modelValue":e[13]||(e[13]=l=>n.unit=l),size:"default",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",maxlength:"10"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u9879\u76EE\u5DE5\u671F",prop:"roleName"},{default:t(()=>[u(le,{modelValue:n.date,"onUpdate:modelValue":e[14]||(e[14]=l=>n.date=l),type:"date",size:"default",placeholder:"\u8BF7\u9009\u62E9","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u8D1F\u8D23\u4EBA",prop:"roleName"},{default:t(()=>[u(x,{modelValue:n.user,"onUpdate:modelValue":e[15]||(e[15]=l=>n.user=l),size:"default",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",maxlength:"10"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"roleName"},{default:t(()=>[u(x,{modelValue:n.phone,"onUpdate:modelValue":e[16]||(e[16]=l=>n.phone=l),size:"default",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",maxlength:"10"},null,8,["modelValue"])]),_:1}),u(d,{label:"\u9879\u76EE\u72B6\u6001"},{default:t(()=>[u(E,{modelValue:n.status,"onUpdate:modelValue":e[17]||(e[17]=l=>n.status=l),size:"default",placeholder:"\u8BF7\u9009\u62E9"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","title"])])}}});var he=de(Be,[["__scopeId","data-v-59039094"]]);export{he as default};
