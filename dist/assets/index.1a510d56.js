import{a as r,o as $,F as Z,_ as G,d as J,b as V,O as K,g as i,h as Q,i as ee,k as t,w as a,l as B,T,p as d,s as w,j as x,U as te,t as k,V as z,W as le,X as ue,Y as ae,Z as oe,A as N,$ as ne,a0 as se}from"./index.f8e22ed8.js";import{v as ie}from"./index.0b8c13d3.js";import"./dayjs.9ac3a968.js";function A(s){return s&&s.offsetParent?A(s.offsetParent)+s.offsetTop:s.offsetTop}function S(s,g=120){const c=document.body.offsetHeight,o=A(document.getElementById(s));return c-o-g}function de({id:s="xc-table",offsetBottom:g=100}={}){const c=r(0),o=()=>{c.value=S(s,g)};return $(async()=>{setTimeout(o,200),window.addEventListener("resize",o)}),Z(()=>{window.removeEventListener("resize",o)}),{maxTableHeight:c,setTableMaxHeight:S}}const re={class:"main-content"},ce={class:"btns"},pe={class:"dialog-form"},me={class:"dialog-footer"},fe=J({__name:"index",setup(s){r();const g=r([]),c=r(null);r({});const o=V({dictCode:"",dictValue:"",pageNum:1,pageSize:10}),b=r(0),H=V({dictValue:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u5178\u503C",trigger:"blur"}],dictCode:[{required:!0,message:"\u8BF7\u9009\u62E9\u5B57\u5178\u7C7B\u578B",trigger:"change"}],dictDesc:[{required:!0,message:"\u8BF7\u8F93\u5165\u5B57\u5178\u540D\u79F0",trigger:"blur"}]}),_=async()=>{try{const u=await ue(o);g.value=u.list,b.value=u.total}catch{}},I=async u=>{await ae.confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E  \u5B9A",cancelButtonText:"\u53D6  \u6D88",type:"warning"}),await oe({id:u.id}),N.success("\u5220\u9664\u6210\u529F\uFF01"),v()},v=u=>{u&&c.value.resetFields(),o.pageNum=1,_()},U=u=>{o.pageNum=1,o.pageSize=u,_()},M=u=>{o.pageNum=u,_()},p=r(!1),D=r(null),n=V({id:null,dictDesc:null,dictName:null,dictValue:null,dictCode:null}),P=u=>{Object.keys(u).forEach(e=>n[e]="")};K(p,u=>{u||(D.value.clearValidate(),P(n))});const j=async u=>{var e;await ie(u),n.dictName=(e=z.find(E=>E.dictValue===n.dictCode))==null?void 0:e.dictDesc,n.id?await ne(n):await se(n),N.success("\u63D0\u4EA4\u6210\u529F\uFF01"),p.value=!1,_()},L=async u=>{p.value=!0,Object.keys(u).forEach(e=>{e in n&&(n[e]=u[e])})};$(()=>{_()});const{maxTableHeight:O,setTableMaxHeight:ge}=de({id:"userTable",offsetBottom:92});return(u,e)=>{const E=i("DictSelect"),F=i("ElFormItem"),R=i("ElInput"),m=i("ElButton"),y=i("ElForm"),f=i("ElTableColumn"),q=i("ElTable"),Y=i("ElPagination"),h=i("el-input"),W=i("ElDialog");return Q(),ee("div",re,[t(y,{ref_key:"searchFormRef",ref:c,model:o,inline:"",class:"search-form","label-width":"68px","label-position":"left"},{default:a(()=>[t(F,{label:"\u5B57\u5178\u7C7B\u578B",prop:"dictCode"},{default:a(()=>[t(E,{modelValue:o.dictCode,"onUpdate:modelValue":e[0]||(e[0]=l=>o.dictCode=l),clearable:"",type:B(T).DIC_TYPE,placeholder:"\u8BF7\u9009\u62E9"},null,8,["modelValue","type"])]),_:1}),t(F,{label:"\u5B57\u5178\u503C",props:"dicValue"},{default:a(()=>[t(R,{modelValue:o.dictValue,"onUpdate:modelValue":e[1]||(e[1]=l=>o.dictValue=l),clearable:"",placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9"},null,8,["modelValue"])]),_:1}),t(F,null,{default:a(()=>[t(m,{color:"#4371EE",onClick:e[2]||(e[2]=l=>v(!1))},{default:a(()=>[d(" \u67E5\u8BE2 ")]),_:1}),t(m,{plain:"",onClick:e[3]||(e[3]=l=>v(!0))},{default:a(()=>[d(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"]),w(" </ElCol> "),x("div",ce,[t(m,{class:"add-btn",color:"#4371EE",icon:B(te),onClick:e[4]||(e[4]=l=>p.value=!0)},{default:a(()=>[d(" \u6DFB\u52A0\u5B57\u5178 ")]),_:1},8,["icon"])]),t(q,{border:"",id:"userTable",class:"table",data:g.value,style:le({height:`${B(O)}px`,overflow:"auto"})},{default:a(()=>[t(f,{label:"\u5E8F\u53F7",width:"80"},{default:a(l=>[d(k((o.pageNum-1)*o.pageSize+l.$index+1),1)]),_:1}),t(f,{label:"\u5B57\u5178\u7C7B\u578B"},{default:a(l=>{var C;return[d(k((C=B(z).find(X=>X.dictValue===l.row.dictCode))==null?void 0:C.dictDesc),1)]}),_:1}),t(f,{prop:"dictCode",label:"\u5B57\u5178\u7F16\u7801"}),t(f,{prop:"dictDesc",label:"\u5B57\u5178\u540D\u79F0"}),t(f,{prop:"dictValue",label:"\u5B57\u5178\u503C"}),t(f,{prop:"createTime",label:"\u521B\u5EFA\u65F6\u95F4",width:"150"}),t(f,{fixed:"right",label:"\u64CD\u4F5C",width:"120"},{default:a(l=>[t(m,{link:"",type:"text",onClick:C=>L(l.row)},{default:a(()=>[d(" \u4FEE\u6539 ")]),_:2},1032,["onClick"]),t(m,{link:"",type:"text",onClick:C=>I(l.row)},{default:a(()=>[d(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","style"]),t(Y,{class:"pagination",background:"",layout:"total,sizes,prev, pager, next,jumper",total:b.value,"current-page":o.pageNum,"page-sizes":[10,20,50,100],"page-size":o.pageSize,onSizeChange:U,onCurrentChange:M},null,8,["total","current-page","page-size"]),w("\u65B0\u589E\u6216\u7F16\u8F91\u89D2\u8272"),t(W,{class:"main-dialog",modelValue:p.value,"onUpdate:modelValue":e[10]||(e[10]=l=>p.value=l),title:n.id?"\u4FEE\u6539\u5B57\u5178":"\u6DFB\u52A0\u5B57\u5178",width:"480px"},{footer:a(()=>[x("span",me,[t(m,{onClick:e[8]||(e[8]=l=>p.value=!1)},{default:a(()=>[d("\u53D6 \u6D88")]),_:1}),t(m,{color:"#4371EE",onClick:e[9]||(e[9]=l=>j(D.value))},{default:a(()=>[d("\u63D0 \u4EA4")]),_:1})])]),default:a(()=>[x("div",pe,[t(y,{ref_key:"addFormRef",ref:D,model:n,rules:H,"label-width":"80px","label-position":"left"},{default:a(()=>[t(F,{label:"\u5B57\u5178\u540D\u79F0",prop:"dictDesc",class:"full-item"},{default:a(()=>[t(h,{modelValue:n.dictDesc,"onUpdate:modelValue":e[5]||(e[5]=l=>n.dictDesc=l),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),t(F,{label:"\u5B57\u5178\u7C7B\u578B",prop:"dictCode",class:"full-item"},{default:a(()=>[t(E,{modelValue:n.dictCode,"onUpdate:modelValue":e[6]||(e[6]=l=>n.dictCode=l),type:B(T).DIC_TYPE,placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue","type"])]),_:1}),t(F,{label:"\u5B57\u5178\u503C",prop:"dictValue",class:"full-item"},{default:a(()=>[t(h,{modelValue:n.dictValue,"onUpdate:modelValue":e[7]||(e[7]=l=>n.dictValue=l),placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","title"])])}}});var Ee=G(fe,[["__scopeId","data-v-085f7815"]]);export{Ee as default};
//# sourceMappingURL=index.1a510d56.js.map
