import{u as H,v as O,g as q}from"./index.a83a871f.js";import{_ as G,d as Q,e as n,X,a as h,C as Y,o as Z,D as s,f as J,g as W,i as l,w as a,m as E,p as x,h as C,j as F,F as ee,G as ue,Y as le,S as ae,Q as te,Z as oe,x as w,$ as de,a0 as se,a1 as ie,a2 as z}from"./index.6d0f2da3.js";/* empty css                   */var ne=[{id:777711,label:"\u7BA1\u7406\u5E73\u53F0",children:[{id:111,label:"\u9879\u76EE\u7BA1\u7406",children:[{id:1,path:"/workbench/project",label:"\u9875\u9762\u8BBF\u95EE"},{id:2,path:"addProject",label:"\u521B\u5EFA\u9879\u76EE"},{id:3,path:"editProject",label:"\u7F16\u8F91\u9879\u76EE"},{id:4,path:"editProjectMember",label:"\u6210\u5458\u7BA1\u7406"}]},{id:222,label:"\u9053\u8DEF\u7BA1\u7406",children:[{id:5,path:"/workbench/road",label:"\u9875\u9762\u8BBF\u95EE"},{id:6,path:"importRoadCad",label:"\u5BFC\u5165CAD"},{id:7,path:"exportRoadCad",label:"\u5BFC\u51FACAD"},{id:8,path:"importRoadData",label:"\u5BFC\u5165\u6570\u636E"},{id:9,path:"exportRoadData",label:"\u5BFC\u51FA\u6570\u636E"},{id:10,path:"createRoute",label:"\u521B\u5EFA\u9053\u8DEF"}]},{id:333,label:"\u7BA1\u7F51\u6570\u636E",children:[{id:11,path:"/workbench/road",label:"\u9875\u9762\u8BBF\u95EE"},{id:12111,label:"\u7BA1\u4E95\u6570\u636E",children:[{id:12,label:"\u7BA1\u4E95\u6570\u636E-\u6807\u7B7E\u9875"},{id:13,label:"\u63D0\u4EA4\u5BA1\u6838"},{id:14,label:"\u6253\u56DE\u7ED9\u6D4B\u7ED8"},{id:15,label:"\u5BA1\u6838\u901A\u8FC7"},{id:16,label:"\u53D1\u8D77\u68C0\u6D4B"},{id:17,label:"\u53D1\u8D77\u6E05\u6DE4"},{id:18,label:"\u590D\u6838\u5B8C\u6210"},{id:19,label:"\u5BFC\u51FA\u6570\u636E"},{id:20,label:"\u6D4B\u7ED8\u5BFC\u5165"},{id:21,label:"\u6807\u8BB0\u4E3A\u5B8C\u6210"},{id:22,label:"\u5199\u6279\u6CE8"},{id:23,label:"\u8BE6\u60C5"},{id:24,label:"\u68C0\u6D4B\u6570\u636E"},{id:25,label:"\u7F16\u8F91"}]},{id:271111,label:"\u7BA1\u7EBF\u6570\u636E",children:[{id:27,label:"\u7BA1\u7EBF\u6570\u636E-\u6807\u7B7E\u9875"},{id:28,label:"\u63D0\u4EA4\u5BA1\u6838"},{id:29,label:"\u6253\u56DE\u7ED9\u6D4B\u7ED8"},{id:30,label:"\u5BA1\u6838\u901A\u8FC7"},{id:31,label:"\u53D1\u8D77\u68C0\u6D4B"},{id:32,label:"\u53D1\u8D77\u6E05\u6DE4"},{id:33,label:"\u590D\u6838\u5B8C\u6210"},{id:34,label:"\u5BFC\u51FA\u6570\u636E"},{id:35,label:"\u6D4B\u7ED8\u5BFC\u5165"},{id:36,label:"\u6807\u8BB0\u4E3A\u5B8C\u6210"},{id:37,label:"\u5199\u6279\u6CE8"},{id:38,label:"\u8BE6\u60C5"},{id:39,label:"\u68C0\u6D4B\u6570\u636E"},{id:40,label:"\u7F16\u8F91"}]}]},{label:"\u7CFB\u7EDF\u8BBE\u7F6E",id:555,children:[{id:444,label:"\u7528\u6237\u4E2D\u5FC3",children:[{id:42,path:"/workbench/system/user",label:"\u9875\u9762\u8BBF\u95EE"},{id:43,label:"\u6DFB\u52A0"},{id:44,label:"\u7F16\u8F91"},{id:45,label:"\u5220\u9664"}]},{id:5555,label:"\u89D2\u8272\u7BA1\u7406",children:[{id:46,path:"/workbench/system/role",label:"\u9875\u9762\u8BBF\u95EE"},{id:47,label:"\u6DFB\u52A0"},{id:48,label:"\u7F16\u8F91"},{id:49,label:"\u5220\u9664"}]},{id:6666,label:"\u5B57\u5178\u7BA1\u7406",children:[{id:50,path:"/workbench/system/dic",label:"\u9875\u9762\u8BBF\u95EE"},{id:51,label:"\u6DFB\u52A0"},{id:52,label:"\u7F16\u8F91"},{id:53,label:"\u5220\u9664"}]}]}]},{id:777711222,label:"APP",children:[{id:900,label:"\u68C0\u6D4B\u5DE5\u5355"},{id:900,label:"\u6E05\u6DE4\u5DE5\u5355"}]}];const re={class:"main-content"},ce={class:"btns"},Ee={class:"dialog-form"},me={class:"dialog-footer"},be=Q({__name:"role",setup(pe){const B=n(),g=n([]),_=n([{id:1,code:"xc-001",name:"\u6D4B\u8BD5\u9879\u76EE",unit:"\u5355\u4F4D\u540D\u79F0",date:"2023-09-10",user:"\u5F20\u4E09",kaigong:"2023-09-10",status:1}]);X({subSystem:0});const v=n(null);n({});const d=h({code:"",name:"",unit:"",date:"",user:"",status:"",pageNum:1,pageSize:20}),A=n(0),I=(u,e,i)=>{console.log(u,e,i)},V=h({roleName:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",trigger:"blur"}]}),b=async()=>{try{const u=await ae(d);_.value=u.list,d.pageNum=u.pageNum,d.pageSize=u.pageSize,A.value=u.total}catch{}},N=async u=>{await te.confirm("\u786E\u8BA4\u8981\u5220\u9664\u5417\uFF1F","\u63D0\u793A",{confirmButtonText:"\u786E  \u5B9A",cancelButtonText:"\u53D6  \u6D88",type:"warning"}),await oe({roleId:u.roleId}),w.success("\u5220\u9664\u6210\u529F\uFF01"),p()},p=u=>{u&&v.value.resetFields(),d.pageNum=1,b()},T=u=>{d.pageNum=1,d.pageSize=u,b()},R=u=>{d.pageNum=u,b()},r=n(!1),D=n(null),o=h({roleId:"",addTime:"2024-01-01",roleDesc:"",moduleIds:[],roleName:""}),S=u=>{Object.keys(u).forEach(e=>o[e]="")};Y(r,u=>{u||(D.value.clearValidate(),S(o),g.value=[])});const j=async u=>{o.moduleIds=B.value.getCheckedKeys(!0);const e={...o,moduleIds:o.moduleIds.join(",")};await O(u),o.roleId?await de(e):await se(e),w.success("\u64CD\u4F5C\u6210\u529F\uFF01"),r.value=!1,p()},$=async u=>{const e=await ie({roleId:u.roleId});o.moduleIds=q(e),r.value=!0,await z(),B.value.setCheckedKeys(o.moduleIds,!0),Object.keys(u).forEach(i=>{i in o&&(o[i]=u[i])}),await z()};Z(()=>{b()});const{maxTableHeight:M,setTableMaxHeight:Fe}=H({id:"userTable",offsetBottom:92});return(u,e)=>{const i=s("ElInput"),m=s("ElFormItem"),c=s("ElButton"),k=s("ElForm"),f=s("ElTableColumn"),P=s("ElTable"),U=s("ElPagination"),y=s("el-input"),K=s("ElDialog");return J(),W("div",re,[l(k,{ref_key:"searchFormRef",ref:v,model:d,inline:"",class:"search-form","label-width":"68px","label-position":"left"},{default:a(()=>[l(m,{label:"\u89D2\u8272\u540D\u79F0",prop:"name"},{default:a(()=>[l(i,{modelValue:d.name,"onUpdate:modelValue":e[0]||(e[0]=t=>d.name=t),size:"default",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u59D3\u540D",prop:"code"},{default:a(()=>[l(i,{modelValue:d.code,"onUpdate:modelValue":e[1]||(e[1]=t=>d.code=t),size:"default",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),l(m,null,{default:a(()=>[l(c,{size:"default",color:"#4371EE",onClick:e[2]||(e[2]=t=>p(!1))},{default:a(()=>[E(" \u67E5\u8BE2 ")]),_:1}),l(c,{size:"default",plain:"",onClick:e[3]||(e[3]=t=>p(!0))},{default:a(()=>[E(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},8,["model"]),x(" </ElCol> "),C("div",ce,[l(c,{class:"add-btn",color:"#4371EE",size:"default",icon:F(ee),onClick:e[4]||(e[4]=t=>r.value=!0)},{default:a(()=>[E(" \u6DFB\u52A0\u6210\u5458 ")]),_:1},8,["icon"])]),l(P,{border:"",id:"userTable",class:"table",data:_.value,style:ue({height:`${F(M)}px`,overflow:"auto"})},{default:a(()=>[l(f,{prop:"roleName",label:"\u89D2\u8272\u540D\u79F0"}),l(f,{prop:"roleDesc",label:"\u89D2\u8272\u8BF4\u660E"}),l(f,{fixed:"right",label:"\u64CD\u4F5C",width:"120"},{default:a(t=>[l(c,{link:"",type:"text",size:"default",onClick:L=>$(t.row)},{default:a(()=>[E(" \u4FEE\u6539 ")]),_:2},1032,["onClick"]),l(c,{link:"",type:"text",size:"default",onClick:L=>N(t.row)},{default:a(()=>[E(" \u5220\u9664 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","style"]),l(U,{class:"pagination",background:"",layout:"total,sizes,prev, pager, next,jumper",total:A.value,"current-page":d.pageNum,"page-sizes":[10,20,50,100],"page-size":d.pageSize,onSizeChange:T,onCurrentChange:R},null,8,["total","current-page","page-size"]),x("\u65B0\u589E\u6216\u7F16\u8F91\u89D2\u8272"),l(K,{class:"main-dialog",modelValue:r.value,"onUpdate:modelValue":e[9]||(e[9]=t=>r.value=t),title:o.roleId?"\u6DFB\u52A0\u89D2\u8272":"\u4FEE\u6539\u89D2\u8272",width:"480px"},{footer:a(()=>[C("span",me,[l(c,{size:"default",onClick:e[7]||(e[7]=t=>r.value=!1)},{default:a(()=>[E("\u53D6 \u6D88")]),_:1}),l(c,{color:"#4371EE",size:"default",onClick:e[8]||(e[8]=t=>j(D.value))},{default:a(()=>[E("\u63D0 \u4EA4")]),_:1})])]),default:a(()=>[C("div",Ee,[l(k,{ref_key:"addFormRef",ref:D,model:o,rules:V,"label-width":"80px","label-position":"left"},{default:a(()=>[l(m,{label:"\u89D2\u8272\u540D\u79F0",prop:"roleName"},{default:a(()=>[l(y,{modelValue:o.roleName,"onUpdate:modelValue":e[5]||(e[5]=t=>o.roleName=t),size:"default",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",maxlength:"10"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u89D2\u8272\u540D\u79F0",class:"authItem",prop:"roleDesc"},{default:a(()=>[l(y,{type:"textarea",rows:5,modelValue:o.roleDesc,"onUpdate:modelValue":e[6]||(e[6]=t=>o.roleDesc=t),size:"default",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u8BF4\u660E",maxlength:"10"},null,8,["modelValue"])]),_:1}),l(m,{label:"\u6743\u9650\u8BBE\u7F6E",class:"authItem",props:"moduleIds"},{default:a(()=>[l(F(le),{ref_key:"treeRef",ref:B,"node-key":"id",data:F(ne),"show-checkbox":"","default-checked-keys":g.value,onCheckChange:I},null,8,["data","default-checked-keys"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","title"])])}}});var he=G(be,[["__scopeId","data-v-816290f4"]]);export{he as default};
