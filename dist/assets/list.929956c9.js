import{u as ie}from"./useTableSetting.58ef48c3.js";import{_ as se,d as re,r as p,D as I,a as C,o as fe,y as r,b as F,c as _,f as u,w as t,e as x,F as M,G as R,l as z,j as c,g as k,z as pe,H as me,B as Ee,I as Y,J as ce,t as be}from"./index.7b73c6f6.js";const Fe={class:"main-content"},xe={class:"data-type"},Be={class:"btns"},we={key:1},he={class:"dialog-form"},De={class:"dialog-footer"},_e=re({__name:"list",setup(ge){const{maxTableHeight:y,setTableMaxHeight:H}=ie({id:"userTable",offsetBottom:92}),A=p("first"),B=p(1),N=async a=>{B.value=a,setTimeout(()=>{y.value=H("userTable",92)},100)},J=I(()=>{let a=g.value.map(n=>n.id),e=[],s;for(let n=0;n<a.length;n++)n===0?(e.push(1),s=0):a[n]===a[n-1]?(e[s]+=1,e.push(0)):(e.push(1),s=n);return e}),O=({row:a,column:e,rowIndex:s,columnIndex:n})=>{if(n<2)return{rowspan:J.value[s],colspan:1}},P=I(()=>{const a=[{label:"\u7269\u63A2\u70B9\u53F7",field:"wtdh",width:"140px",fixed:"left"},{label:"\u6570\u636E\u72B6\u6001",field:"sjzt",width:"140px",fixed:"left"},{label:"\u5904\u7406\u4EBA",field:"clr",width:"140px",fixed:"left"},{label:"\u7BA1\u7EBF\u6027\u8D28",field:"gxxz",width:"140px",edit:!0,fixed:!1},{label:"\u7279\u5F81",field:"tz",width:"140px",edit:!0,fixed:!1},{label:"\u9644\u5C5E\u7269",field:"fsw",width:"140px",edit:!0,fixed:!1},{label:"\u4E95\u5E95\u6DF1",field:"jds",width:"140px",edit:!0,fixed:!1},{label:"\u6C34\u6DF1",field:"ss",width:"140px",edit:!0,fixed:!1},{label:"\u6DE4\u6CE5\u6DF1",field:"yns",width:"140px",edit:!0,fixed:!1},{label:"\u4E95\u76D6\u72B6\u6001",field:"jgzt",width:"140px",edit:!0,fixed:!1},{label:"\u4E95\u76D6\u6750\u8D28",field:"jgcz",width:"140px",edit:!0,fixed:!1},{label:"\u5907\u6CE8",field:"bz",width:"140px",edit:!0,fixed:!1}],e=[{label:"\u9053\u8DEF",field:"wtdh",width:"140px",fixed:"left"},{label:"\u8D77\u6B62\u70B9\u53F7",field:"dh",width:"140px",fixed:"left"},{label:"\u6570\u636E\u72B6\u6001",field:"sjzt",width:"140px",fixed:"left"},{label:"\u5904\u7406\u4EBA",field:"clr",width:"140px",fixed:"left"},{label:"\u7BA1\u7EBF\u6027\u8D28",field:"gxxz",width:"140px",edit:!0},{label:"\u8D77\u70B9\u57CB\u6DF1",field:"fsw",width:"140px",edit:!0},{label:"\u7EC8\u70B9\u57CB\u6DF1",field:"zdms",width:"140px",edit:!0},{label:"\u8D77\u70B9\u7BA1\u5E95\u9AD8\u7A0B",field:"gc",width:"140px",edit:!0},{label:"\u7BA1\u5F84",field:"gj",width:"140px",edit:!0},{label:"\u6750\u8D28",field:"cz",width:"140px",edit:!0},{label:"\u6D41\u5411",field:"lx",width:"140px",edit:!0},{label:"\u57CB\u8BBE\u7C7B\u578B",field:"lx",width:"140px",edit:!0},{label:"\u5907\u6CE8",field:"bz",width:"140px",edit:!0}];let s=[1,2,3,4].map(f=>{const o={};return[...a,...e].forEach(m=>{o[m.field]=Math.random().toFixed(2)*1e3,m.edit&&(o[m.field+"Show"]=!1)}),o.id=f,f===2&&(o.histroy=!0),o.canEdit=!0,o.editing=!1,o}),n={};return Object.keys(s[1]).forEach(f=>{const o=[...a,...e].find(E=>E.field===f);let m=o==null?void 0:o.edit;n[f]=m?s[1][f]+1:s[1][f],n.canEdit=!1}),s.splice(2,0,n),g.value=s,B.value===1?a:e}),L=(a,e)=>{a[e.property+"Show"]=!0},q=({row:a,rowIndex:e})=>a.histroy?"error-row":"",g=p([]),V=p(!1),G=p(0),K=p(!1);p(!1),p("");const S=p(),U=p(),Q=p({}),d=C({code:"",name:"",unit:"",date:"",user:"",status:"",pageNum:1,pageSize:20}),i=C({roleName:"",roleDesc:""}),W=C({roleName:[{required:!0,message:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",trigger:"blur"}]}),h=async()=>{},X=a=>{Q.value=JSON.parse(JSON.stringify(a))},Z=a=>{a.resetFields(),d.pageNum=1,h()},ee=a=>{d.pageNum=1,d.pageSize=a,h()},le=a=>{d.pageNum=a,h()},ue=async a=>{await Ee(a)},T=async a=>{},te=()=>{};return fe(()=>{h()}),(a,e)=>{const s=r("el-tab-pane"),n=r("el-tabs"),f=r("ElInput"),o=r("ElFormItem"),m=r("ElSelect"),E=r("ElButton"),j=r("ElForm"),v=r("ElTableColumn"),ae=r("ElTable"),oe=r("ElPagination"),w=r("el-input"),de=r("el-date-picker"),ne=r("ElDialog");return F(),_("div",Fe,[u(n,{modelValue:A.value,"onUpdate:modelValue":e[0]||(e[0]=l=>A.value=l),onTabClick:a.handleClick},{default:t(()=>[u(s,{label:"\u5929\u5E9C\u65B0\u533A\u9879\u76EE",name:"first"}),u(s,{label:"\u6B66\u4FAF\u533A\u9879\u76EE",name:"second"})]),_:1},8,["modelValue","onTabClick"]),x("section",xe,[x("div",{class:M([B.value===1?"active":"","tab-button"]),onClick:e[1]||(e[1]=l=>N(1))},"\u7BA1\u4E95\u6570\u636E",2),x("div",{class:M([B.value===2?"active":"","tab-button"]),onClick:e[2]||(e[2]=l=>N(2))},"\u7BA1\u7EBF\u6570\u636E",2)]),u(j,{ref_key:"searchFormRef",ref:U,inline:"",class:"search-form","label-width":"68px","label-position":"left"},{default:t(()=>[u(o,{label:"\u7269\u63A2\u70B9\u53F7"},{default:t(()=>[u(f,{modelValue:d.code,"onUpdate:modelValue":e[3]||(e[3]=l=>d.code=l),size:"default",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),u(o,{label:"\u6570\u636E\u72B6\u6001"},{default:t(()=>[u(m,{modelValue:d.user,"onUpdate:modelValue":e[4]||(e[4]=l=>d.user=l),size:"default",placeholder:"\u8BF7\u9009\u62E9"},null,8,["modelValue"])]),_:1}),u(o,{label:"\u5904\u7406\u4EBA"},{default:t(()=>[u(f,{modelValue:d.name,"onUpdate:modelValue":e[5]||(e[5]=l=>d.name=l),size:"default",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),u(o,{label:"\u9053\u8DEF"},{default:t(()=>[u(f,{modelValue:d.unit,"onUpdate:modelValue":e[6]||(e[6]=l=>d.unit=l),size:"default",placeholder:"\u8BF7\u8F93\u5165"},null,8,["modelValue"])]),_:1}),B.value===2?(F(),_(R,{key:0},[u(o,{label:"\u7BA1\u7EBF\u6027\u8D28"},{default:t(()=>[u(m,{modelValue:d.user,"onUpdate:modelValue":e[7]||(e[7]=l=>d.user=l),size:"default",placeholder:"\u8BF7\u9009\u62E9"},null,8,["modelValue"])]),_:1}),u(o,{label:"\u9879\u76EE"},{default:t(()=>[u(m,{modelValue:d.status,"onUpdate:modelValue":e[8]||(e[8]=l=>d.status=l),size:"default",placeholder:"\u8BF7\u9009\u62E9"},null,8,["modelValue"])]),_:1})],64)):z("v-if",!0),u(o,null,{default:t(()=>[u(E,{size:"default",color:"#4371EE"},{default:t(()=>[c(" \u67E5\u8BE2 ")]),_:1}),u(E,{size:"default",plain:"",onClick:e[9]||(e[9]=l=>Z(U.value))},{default:t(()=>[c(" \u91CD\u7F6E ")]),_:1})]),_:1})]),_:1},512),z(" </ElCol> "),x("div",Be,[u(E,{class:"add-btn",color:"#4371EE",size:"default",icon:k(pe),onClick:e[10]||(e[10]=l=>V.value=!0)},{default:t(()=>[c(" \u65B0\u589E\u89D2\u8272 ")]),_:1},8,["icon"])]),u(ae,{border:"",id:"userTable",class:"table",data:g.value,height:k(y),"span-method":O,onCellDblclick:L,"row-class-name":q},{default:t(()=>[u(v,{type:"selection",width:"55px",fixed:"left"}),(F(!0),_(R,null,me(k(P),(l,D)=>(F(),Y(v,{key:D,fixed:l.fixed,prop:l.field,label:l.label,width:l.width},ce({_:2},[l.edit?{name:"default",fn:t(b=>[b.row[l.field+"Show"]&&b.row.canEdit?(F(),Y(f,{key:0,modelValue:b.row[l.field],"onUpdate:modelValue":$=>b.row[l.field]=$,size:"default",placeholder:"\u8BF7\u8F93\u5165",onBlur:$=>b.row[l.field+"Show"]=!1},null,8,["modelValue","onUpdate:modelValue","onBlur"])):(F(),_("span",we,be(b.row[l.field]),1))]),key:"0"}:void 0]),1032,["fixed","prop","label","width"]))),128)),u(v,{fixed:"right",label:"\u64CD\u4F5C",width:"200"},{default:t(l=>[u(E,{link:"",type:"text",size:"default",onClick:D=>X(l.row)},{default:t(()=>[c(" \u8BE6\u60C5 ")]),_:2},1032,["onClick"]),u(E,{link:"",type:"text",size:"default",onClick:D=>T(l.row)},{default:t(()=>[c(" \u7F16\u8F91 ")]),_:2},1032,["onClick"]),u(E,{link:"",type:"text",size:"default",onClick:D=>T(l.row)},{default:t(()=>[c(" \u6210\u5458\u7BA1\u7406 ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data","height"]),u(oe,{class:"pagination",background:"",layout:"total,sizes,prev, pager, next,jumper",total:G.value,"current-page":d.pageNum,"page-sizes":[10,20,50,100],"page-size":d.pageSize,onSizeChange:ee,onCurrentChange:le},null,8,["total","current-page","page-size"]),z("\u65B0\u589E\u6216\u7F16\u8F91\u89D2\u8272"),u(ne,{modelValue:V.value,"onUpdate:modelValue":e[19]||(e[19]=l=>V.value=l),title:K.value?"\u7F16\u8F91\u9879\u76EE":"\u521B\u5EFA\u9879\u76EE",width:"480px"},{footer:t(()=>[x("span",De,[u(E,{size:"default",onClick:te},{default:t(()=>[c("\u53D6 \u6D88")]),_:1}),u(E,{color:"#4371EE",size:"default",onClick:e[18]||(e[18]=l=>ue(S.value))},{default:t(()=>[c("\u63D0 \u4EA4")]),_:1})])]),default:t(()=>[x("div",he,[u(j,{ref_key:"addFormRef",ref:S,model:i,rules:W,"label-width":"80px","label-position":"left"},{default:t(()=>[u(o,{label:"\u9879\u76EE\u7F16\u53F7",prop:"roleName"},{default:t(()=>[u(w,{modelValue:i.code,"onUpdate:modelValue":e[11]||(e[11]=l=>i.code=l),size:"default",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",maxlength:"10"},null,8,["modelValue"])]),_:1}),u(o,{label:"\u9879\u76EE\u540D\u79F0",prop:"roleName"},{default:t(()=>[u(w,{modelValue:i.name,"onUpdate:modelValue":e[12]||(e[12]=l=>i.name=l),size:"default",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",maxlength:"10"},null,8,["modelValue"])]),_:1}),u(o,{label:"\u59D4\u6258\u5355\u4F4D",prop:"roleName"},{default:t(()=>[u(w,{modelValue:i.unit,"onUpdate:modelValue":e[13]||(e[13]=l=>i.unit=l),size:"default",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",maxlength:"10"},null,8,["modelValue"])]),_:1}),u(o,{label:"\u9879\u76EE\u5DE5\u671F",prop:"roleName"},{default:t(()=>[u(de,{modelValue:i.date,"onUpdate:modelValue":e[14]||(e[14]=l=>i.date=l),type:"date",size:"default",placeholder:"\u8BF7\u9009\u62E9","value-format":"YYYY-MM-DD"},null,8,["modelValue"])]),_:1}),u(o,{label:"\u8D1F\u8D23\u4EBA",prop:"roleName"},{default:t(()=>[u(w,{modelValue:i.user,"onUpdate:modelValue":e[15]||(e[15]=l=>i.user=l),size:"default",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",maxlength:"10"},null,8,["modelValue"])]),_:1}),u(o,{label:"\u8054\u7CFB\u7535\u8BDD",prop:"roleName"},{default:t(()=>[u(w,{modelValue:i.phone,"onUpdate:modelValue":e[16]||(e[16]=l=>i.phone=l),size:"default",placeholder:"\u8BF7\u8F93\u5165\u89D2\u8272\u540D",maxlength:"10"},null,8,["modelValue"])]),_:1}),u(o,{label:"\u9879\u76EE\u72B6\u6001"},{default:t(()=>[u(m,{modelValue:i.status,"onUpdate:modelValue":e[17]||(e[17]=l=>i.status=l),size:"default",placeholder:"\u8BF7\u9009\u62E9"},null,8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])])]),_:1},8,["modelValue","title"])])}}});var Ce=se(_e,[["__scopeId","data-v-9d0df600"]]);export{Ce as default};
