{"version":3,"file":"list.2215ebd2.js","sources":["../../src/views/road/mock.ts","../../src/views/road/list.vue"],"sourcesContent":["export const paths = [\n    [104.054352, 30.58249],\n    [104.055085, 30.582357],\n    [104.05601, 30.582397],\n    [104.056781, 30.582397],\n    [104.057822, 30.582457],\n    [104.058863, 30.58249],\n    [104.059827, 30.58249],\n    [104.060058, 30.582125],\n    [104.059981, 30.580864],\n    [104.060058, 30.580731],\n    [104.059981, 30.580233],\n    [104.06002, 30.579801],\n    [104.059981, 30.579038],\n    [104.06002, 30.578773],\n    [104.060482, 30.578673],\n    [104.060868, 30.578738],\n    [104.061178, 30.578759],\n    [104.06156, 30.578749],\n    [104.062026, 30.578769],\n    [104.062026, 30.578769],\n    [104.062312, 30.578471],\n    [104.062336, 30.578327],\n    [104.0623, 30.578143],\n    [104.062276, 30.578009],\n    [104.062336, 30.577855],\n    [104.062384, 30.57766],\n    [104.062324, 30.5773],\n    [104.062563, 30.577249],\n    [104.062837, 30.577238],\n    [104.063052, 30.577228],\n    [104.063314, 30.577269],\n    [104.063446, 30.577279],\n    [104.06384, 30.577269],\n  ];\n\n\nexport const getPath = () => {\n    return paths\n}\n\nexport const carTeam = [\n    {\n        id: '1',\n        label: '车队1',\n        children:[\n            {\n                id: '1-1',\n                label: '川A12345',\n            },\n            {\n                id: '1-2',\n                label: '川B67890',\n            },\n            {\n                id: '1-3',\n                label: '川C54321',\n            }\n        ]\n    },\n    {\n        id: '2',\n        label: '车队2',\n        children:[\n            {\n                id: '2-1',\n                label: '川D98765',\n            },\n            {\n                id: '2-2',\n                label: '川E43210',\n            }\n        ]\n    }\n]\n\n\nexport const paginate = <T>({ list, page, pageSize }: {list: T[], page: number, pageSize: number}): { data: T[], total: number } => {\n    const total = list.length;\n   // const count = Math.ceil(total / pageSize); // 总页数\n\n    // 计算起始索引和结束索引\n    const start = (page - 1) * pageSize;\n    const end = start + pageSize;\n\n    const data = list.slice(start, end); // 当前页数据\n\n    return {\n        data,\n        total\n    };\n};\n\nexport const leftTable = [\n\n    {id: 1, timeRange: '10分钟', beginTime: '2023-10-01 10:00', lng:104.060482, lat: '30.578673',  endTime: '2023-10-01 10:10', location: '成都成华大道XXXXXX'},\n    {id: 2, timeRange: '20分钟', beginTime: '2023-10-01 10:10', lng:104.06384, lat: '30.577269', endTime: '2023-10-01 10:30', location: '成都成华大道XXXXXX'},\n]\n\nexport const rightTable  = ((paths) => {\n    return paths.map((item, index) => {\n        return {\n            id: index + 1,\n            lng: item[0],\n            lat: item[1],\n            time: `2023-10-01 10:${String(index).padStart(2, '0')}`,\n            speed:  `${index + 1} 米/秒`,\n            location: `成都成华大道XXXXXX ${index + 1}`\n        }\n    });\n\n})(paths)\n","<template>\n    <div class=\"main-content\" >\n        <section class=\"flex-box\" id=\"mapParentContainer\" style=\"height:750px\">\n            <section class=\"left-box\">\n\n                <el-card header=\"条件查询\"  class=\"tree-card\" >\n                    <el-form label-position=\"top\" :model=\"searchForm\">\n                        <el-form-item label=\"车牌号：\">\n                            <el-input v-model=\"searchForm.carNumber\" placeholder=\"请输入车牌号\">\n                            </el-input>\n                        </el-form-item>\n                        <el-form-item label=\"开始日期：\">\n                            <el-date-picker\n                                v-model=\"searchForm.beginDate\"\n                                type=\"date\"\n                                format=\"YYYY-MM-DD\"\n                                placeholder=\"开始日期\"\n                            />\n                        </el-form-item>\n                        <el-form-item label=\"结束日期：\">\n                            <el-date-picker\n                                v-model=\"searchForm.endDate\"\n                                type=\"date\"\n                                format=\"YYYY-MM-DD\"\n                                placeholder=\"开始日期\"\n                            />\n                        </el-form-item>\n                        <el-form-item label=\"选择车辆：\">\n                            <el-tree\n                                ref=\"treeRef\"\n                                :highlight-current=\"true\"\n                                node-key=\"id\"\n                                :data=\"carTeam\"\n                                @node-click=\"handleNodeClick\"\n\n                            />\n                        </el-form-item>\n                        <el-form-item style=\"text-align: center;\">\n                            <el-button type=\"primary\" @click=\"handleSearch\">查 询</el-button>\n                            <el-button  @click=\"handleReset\">重 置</el-button>\n                        </el-form-item>\n                    </el-form>\n\n                </el-card>\n                <el-card header=\"轨迹回放\"  class=\"bottom-card\">\n                    <el-form>\n                        <el-form-item label=\"回放进度：\">\n                            <div @mousedown=\"handleTouchStart\" style=\"width: 100%;\">\n                                <el-slider v-model=\"progress\"  :show-tooltip=\"false\" @change=\"handleProgressChange\"  />\n                            </div>\n\n                        </el-form-item>\n                        <el-form-item>\n\n                            <el-radio-group v-model=\"speed\" @change=\"handleSpeedChange\">\n                                <el-radio v-for=\"option in speedRadioOptions\" :key=\"option.value\" :label=\"option.value\">{{ option.label }}</el-radio>\n                            </el-radio-group>\n                        </el-form-item>\n                    </el-form>\n                    <section class=\"play-box\">\n                        <el-icon v-if=\"!isPlaying || isPaused\"  @click=\"startAnimation()\"><VideoPlay /></el-icon>\n                        <el-icon v-else @click=\"pauseAnimation()\"><VideoPause /></el-icon>\n                        <el-icon class=\"reset\" @click=\"resumeAnimation()\"><Refresh /></el-icon>\n                    </section>\n                </el-card>\n            </section>\n            <div class=\"map-layout\">\n                <MyMap @init=\"initMap\" @resize=\"handleMapResize\"></MyMap>\n            </div>\n        </section>\n\n        <section class=\" table-box\">\n            <el-card header=\"停靠信息\">\n                <el-table\n                    border\n                    id=\"userTable\"\n                    class=\"table\"\n                    :scrollbar-always-on=\"true\"\n                    :data=\"parkTableList\"\n                    @row-click =\"handleParkRowClick\"\n                    >\n                    <el-table-column prop=\"id\" fixed label=\"id\" width=\"130\" />\n                    <el-table-column prop=\"timeRange\" label=\"停靠时长\"  width=\"180\" />\n                    <el-table-column prop=\"beginTime\" label=\"开始时间\"  width=\"180\" />\n                    <el-table-column prop=\"endTime\" label=\"结束时间\" width=\"180\" />\n                    <el-table-column prop=\"location\" label=\"位置描述\" width=\"180\">\n                    </el-table-column>\n\n                </el-table>\n\n                <el-pagination\n                    background\n                    layout=\"total,sizes,prev, pager, next,jumper\"\n                    :total=\"parkTablePager.total\"\n                    :current-page=\"parkTablePager.page\"\n                    :page-sizes=\"[10, 20, 50, 100]\"\n                    :page-size=\"parkTablePager.pageSize\"\n                     @size-change=\"e => handleSizeChange('park', e)\"\n                    @current-change=\"e => handleCurrentChange('park', e)\"\n\n                />\n            </el-card>\n\n            <el-card header=\"轨迹信息\">\n                <el-table\n                    border\n                    id=\"userTable\"\n                    class=\"table\"\n                    :scrollbar-always-on=\"true\"\n                    :data=\"locationTableList\"\n                    :highlight-current-row=\"true\"\n                    @row-click =\"handleLocationRowClick\"\n                    >\n                    <el-table-column prop=\"id\" fixed label=\"id\" width=\"130\" />\n                    <el-table-column prop=\"time\" label=\"时间\"  width=\"180\" />\n                    <el-table-column prop=\"speed\" label=\"速度\" width=\"180\" />\n                    <el-table-column  label=\"经纬度\" width=\"180\">\n                        <template #default=\"scope\" >\n                            经度: {{ scope.row.lng }}<br />\n                            纬度: {{ scope.row.lat }}\n                        </template>\n                    </el-table-column>\n                    <el-table-column prop=\"location\" label=\"位置描述\" width=\"400\" />\n                </el-table>\n\n                <el-pagination\n\n                    background\n                    layout=\"total,sizes,prev, pager, next,jumper\"\n                    :total=\"locationTablePager.total\"\n                    :current-page=\"locationTablePager.page\"\n                    :page-sizes=\"[10, 20, 50, 100]\"\n                    :page-size=\"locationTablePager.pageSize\"\n                     @size-change=\"e => handleSizeChange('location', e)\"\n                    @current-change=\"e => handleCurrentChange('location', e)\"\n\n                />\n            </el-card>\n        </section>\n\n    </div>\n</template>\n\n<script setup lang=\"ts\">\nimport useTableSetting from '@/hooks/useTableSetting';\nimport { ref, onMounted, onUnmounted, reactive, nextTick, watch } from 'vue';\nimport { ElMessage, ElTree, FormInstance, ElMessageBox } from 'element-plus';\n\nimport { getFlatDeepTreeData } from '@/utils/common';\nimport { getPath, carTeam as carTeamData, leftTable, rightTable, paginate} from './mock';\nimport { Polling } from '@/helper/index';\nimport carIcon from '@/assets/images/car.png';\nimport  ErrorCarIcon from '@/assets/images/error-car.png';\nimport type { CSSProperties } from 'vue'\nimport dayjs from '@/helper/dayjs'\nimport { VideoPlay, VideoPause, Refresh } from '@element-plus/icons-vue';\nimport { id } from 'element-plus/es/locale';\nimport { useRoute } from 'vue-router';\n\nconst route = useRoute();\nconst queryVid = route.query.vid\n\n\n\nconst getIcon = (ishighLight = false) => {\n    const iconPath = new URL('../../assets/moving.png', import.meta.url).href;\n\n    return new AMap.Icon({\n        image: iconPath,\n        size: new AMap.Size(21.75, 49.5), // 图标尺寸\n        imageSize: new AMap.Size(21.75, 49.5) // 渲染时拉伸大小\n    });\n};\nlet currentInfoWindow = null; // 当前信息窗口\nconst isPlaying = ref(false); // 是否正在播放动画\n\ninterface Mark {\n  style: CSSProperties\n  label: string\n}\ntype Marks = Record<number, Mark | string>\n\n// 地图相关全局变量\ninterface AMapElements {\n    marker?: any;\n    polyline?: any;\n    passedPolyline?: any;\n}\ninterface TreeInstance {\n    setCurrentKey: (key: string | null) => void;\n}\nconst treeRef = ref<TreeInstance | null>(null);\nconst mapElements = reactive<AMapElements>({});\nlet pathData: number[][] = [];\nlet map = null;\nlet marker: object = {};\nconst isPaused = ref(false); // 是否暂停\n\nconst searchForm = reactive({\n    beginDate: '',\n    carNumber:'',\n    endDate: ''  // 为空表示全部类型\n})\n\nconst treeData = ref([])\nconst progress = ref(0); // 回放速度\nconst speed = ref(800)\nconst speedRadioOptions = [\n    { label: 'x1', value: 800 },\n    { label: 'x5', value: 400 },\n    { label: 'x10', value: 200 },\n    { label: 'x20', value:  100},\n    { label: 'x50', value: 50 },\n  ]\n\n\n\nconst carTeam = ref([]); // 车队树数据\n\nconst getCarTeam = async() => {\n    // 接口替换\n    //  vid: queryVid.value || / URL参数：vid\n    const params = {\n        vid: queryVid || ''\n    }\n    // TO 模拟获取车队数据\n   // const carTeamData = await getFlatDeepTreeData();\n    carTeam.value = carTeamData   //接口数据绑定到JS内存\n\n    // 展开树\n    if(queryVid) {\n        await nextTick(); // 等待DOM更新\n        treeRef.value?.setCurrentKey(queryVid);\n        handleNodeClick(treeRef.value?.getCurrentNode())\n    }\n\n}\n\nonMounted(() => {\n\n    getCarTeam();\n\n\n});\n\nconst handleMapResize = ({ height }) => {\n    const mapParentContainer = document.getElementById('mapParentContainer');\n    mapParentContainer.style.height = height +'px'\n}\nconst initMap = (mapInstance) => { map = mapInstance; }\nconst circleStart = ref(null);\nconst circleEnd = ref(null);\nconst drawMap = (pathData: number[][]) => {\n\n    // 清理历史轨迹\n    if (window.polyline) window.polyline.setMap(null);\n    if (window.passedPolyline) window.passedPolyline.setMap(null);\n\n    // 重新创建轨迹\n    window.polyline = new AMap.Polyline({\n        map: map,\n        path: pathData,\n        showDir:true,\n        strokeColor: \"#28F\",\n        strokeWeight: 6,\n    });\n    if (pathData.length > 0) {\n        circleStart.value = new AMap.Circle({\n            center: new AMap.LngLat(pathData[0][0], pathData[0][1]), // 起点坐标\n            radius: 10, // 半径（像素）\n            strokeColor: \"#179117\", // 描边颜色\n            strokeWeight: 2, // 描边线宽\n            fillColor: \"#179117\", // 填充绿色\n            fillOpacity: 1, // 填充透明度\n        });\n        map.add(circleStart.value);\n    }\n\n    // 添加终点圆圈\n    if (pathData.length > 1) {\n        const lastPoint = pathData[pathData.length - 1];\n        circleEnd.value = new AMap.Circle({\n            center: new AMap.LngLat(lastPoint[0], lastPoint[1]), // 终点坐标\n            radius: 10,\n            strokeColor: \"#E2231A\",\n            strokeWeight: 2,\n            fillColor: \"#E2231A\", // 填充红色\n            fillOpacity: 1,\n        });\n        map.add(circleEnd.value);\n    }\n\n\n    window.passedPolyline = new AMap.Polyline({\n        map: map,\n        strokeColor: \"#AF5\",\n        strokeWeight: 6,\n    });\n\n    // 重新创建标记物\n    window.marker = new AMap.Marker({\n        map: map,\n        position: pathData[0],\n        icon: getIcon(),\n        //icon: \"https://a.amap.com/jsapi_demos/static/demo-center-v2/car.png\",\n\n        offset: new AMap.Pixel(-13, -26),\n    });\n\n    // 重新绑定事件\n    window.marker.on('moving', function (e) {\n        const currentIndex  = findNearestPointIndex(pathData, e.target.getPosition())\n        const progrss = currentIndex / pathData.length * 100\n        progress.value = progrss; // 更新进度条\n        console.log(progrss)\n        isPlaying.value = currentIndex < (pathData.length - 1)\n        const passedPath = currentIndex + 1 <= e.passedPath.length ? e.passedPath : [...pathData.slice(0, currentIndex + 1), e.passedPath];\n        window.passedPolyline.setPath(passedPath);\n        map.setCenter(e.target.getPosition(), true)\n\n    });\n\n    map.setFitView();\n}\nconst startAnimation = function () {\n     window.marker.stopMove();\n     const currentIndex  = findNearestPointIndex(pathData, window.marker.getPosition())\n    if (!pathData || pathData.length === 0) {\n        ElMessage.error('请先查询有效轨迹数据');\n        return;\n    }\n    if(isPaused.value ) {\n\n        window.marker.resumeMove();\n        isPaused.value = false; // 恢复播放状态\n    } else {\n        const remainingPath =  currentIndex < pathData.length - 1 ? pathData.slice(currentIndex): pathData; // 获取剩余路径\n        window.marker.moveAlong(remainingPath, {\n            duration: speed.value , // 使用 speedMap 获取对应速度的持续时间\n            autoRotation: true,\n        });\n    }\n\n};\nconst pauseAnimation = function () {\n    isPaused.value = true; // 设置为非播放状态\n    window.marker.pauseMove();\n};\n\nconst resumeAnimation = function () {\n\n    window.marker.stopMove();\n    window.\n    window.marker.setPosition(pathData[0]);\n    // 移除已行驶轨迹线\n\n    if(window.passedPolyline) {\n        window.passedPolyline.setPath(pathData.slice(0, 1));\n    }\n\n    progress.value = 0; // 重置进度条\n    isPlaying.value = false; // 恢复播放状态\n    isPaused.value = false; // 恢复播放状态\n    map.setCenter(pathData[0], true); // 设置地图中心点为起始位置\n    // window.marker.moveAlong(pathData, {\n    //     duration: speed.value , // 使用 speedMap 获取对应速度的持续时间\n    //     autoRotation: true,\n    // });\n};\n\nconst stopAnimation = function () {\n    window.marker.stopMove();\n};\n\n\nconst handleSearchCar = () => {\n\n}\n\n\nconst handleCarTypeChanged = () => {\n    // TODO , 返回布尔值, 如存在，则高亮该车辆\n\n    // const params = { carNumber: searchForm.carNumber  }\n    //  const hasTarget: boolean =  await https(params)\n    // if(hasTarget) {\n    //     hightLightNode(searchForm.carNumber);\n    // }\n}\n\n\n\n/**\n * 清理地图上的所有轨迹元素和标记\n */\nconst clearMapElements = () => {\n    // 停止当前动画\n    if (window.marker && window.marker.stopMove) {\n        window.marker.stopMove();\n    }\n\n    // 移除轨迹线\n    if (window.polyline) {\n        window.polyline.setMap(null);\n        window.polyline = null;\n    }\n\n    // 移除已行驶轨迹线\n    if (window.passedPolyline) {\n        window.passedPolyline.setMap(null);\n        window.passedPolyline = null;\n    }\n\n    // 移除标记物\n    if (window.marker) {\n        window.marker.setMap(null);\n        window.marker = null;\n    }\n    if(parkMarkers.value && parkMarkers.value.length) {\n        parkMarkers.value.forEach(marker => {\n            marker.setMap(null);\n        });\n\n        parkMarkers.value = [];\n    }\n    if(currentInfoWindow) {\n        currentInfoWindow.close();\n        currentInfoWindow = null;\n    }\n\n};\n\n\nconst handleReset = () => {\n    searchForm.beginDate = '';\n    searchForm.endDate = '';\n    searchForm.carNumber = '';\n    clearMapElements(); // 清除地图上的所有元素\n    pathData = []; // 清空路径数据\n     // 清除树组件的选中状态\n    if (treeRef.value && treeRef.value.setCurrentKey) {\n        treeRef.value.setCurrentKey(null); // 设置为null来清除选中状态\n    }\n\n}\n\n\n// 查询轨迹\nconst handleSearch = async ():void => {\n    //TODO 调用接口查询轨迹数据\n    if (!searchForm.beginDate ) {\n        ElMessage.error('请选择开始日期');\n        return;\n    }\n    if (!searchForm.carNumber ) {\n        ElMessage.error('请选择车辆');\n        return;\n    }\n    // 查询条件参数组装\n    const params = {\n        beginDate: searchForm.beginDate,\n        endDate: searchForm.endDate || dayjs().format('YYYY-MM-DD'),\n        carNumber: searchForm.carNumber\n    };\n    // 获取新数据\n    try {\n        const data = await getPath(params);\n        pathData = data; // 更新全局路径数据\n        clearMapElements();\n        drawMap(pathData); // 重绘地图元素\n    } catch (error) {\n        ElMessage.error('轨迹数据查询失败');\n    }\n    parkTablePager.value.page = 1; // 重置停靠表分页\n    locationTablePager.value.page = 1; // 重置历史轨迹分页\n    getParkTableList()\n    getLocationTableList()\n}\nconst handleNodeClick = (data: { label: string , children: any[] } )=> {\n    const isCarNode = !(data.children && data.children.length) // 是否选中的是车辆\n    searchForm.carNumber = isCarNode ? data.label : '' // 如果是车辆节点，则设置车牌号;\n\n};\n\n\nwatch(speed, (newSpeed) => {\n    // if (window.marker) {\n    //     debugger;\n    //     const currentPosition = window.marker.getPosition();\n    //     const currentIndex = pathData.findIndex((point) =>\n    //         point[0] === currentPosition.lng && point[1] === currentPosition.lat\n    //     );\n    //     if (currentIndex !== -1) {\n    //         const remainingPath = pathData.slice(currentIndex);\n    //         window.marker.stopMove();\n    //         window.marker.setPosition(remainingPath[0]);\n    //         window.marker.moveAlong(remainingPath, {\n    //             duration: 101 - newSpeed,\n    //             autoRotation: true,\n    //         });\n    //     }\n    // }\n});\n\nconst handleSpeedChange = (e) => {\n\n   if (window.marker && isPlaying.value  && !isPaused.value ) {\n        const currentPosition = window.marker.getPosition();\n         console.log(currentPosition)\n        const currentIndex  = findNearestPointIndex(pathData, currentPosition);\n         console.log(currentIndex)\n        if (currentIndex !== -1 && currentIndex < pathData.length - 1 ) {\n            const remainingPath = pathData.slice(currentIndex);\n            window.marker.stopMove();\n            window.marker.setPosition(remainingPath[0]);\n            window.marker.moveAlong(remainingPath, {\n                duration: speed.value,\n                autoRotation: true,\n            });\n        }\n    }\n}\n\nconst handleProgressChange = (val) => {\n    console.log(val)\n    if(!pathData || !pathData.length) return\n    if (window.marker) {\n        const currentIndex = Math.floor(progress.value / 100 * pathData.length);\n        const remainingPath = pathData.slice(currentIndex);\n      //  isPlaying.value &&\n        map.setCenter(remainingPath[0], true)\n        window.marker.setPosition(remainingPath[0]);\n        window.passedPolyline.setPath(pathData.slice(0, currentIndex + 1));\n        if(currentIndex >= pathData.length - 1) {\n            progress.value = 100; // 如果点击的点是最后一个点，则设置进度为100%\n            isPlaying.value = false; // 停止播放状态\n            isPaused.value = false; // 停止暂停状态\n            return;\n        }\n        if (isPlaying.value && !isPaused.value && currentIndex < pathData.length - 1) {\n            window.marker.stopMove();\n            window.marker.setPosition(remainingPath[0]);\n\n            window.marker.moveAlong(remainingPath, {\n                duration: speed.value,\n                autoRotation: true,\n            });\n\n        }\n    }\n}\n\nconst handleTouchStart = e => {\n    // 在触摸开始时暂停动画\n    window.marker.stopMove();\n}\n\n\n// 辅助函数：查找最近路径点\nfunction findNearestPointIndex(path: number[][], position: any) {\n     // 参数校验\n     if (!Array.isArray(path) || path.length === 0 || !position?.lng || !position?.lat) {\n        return 0; // 基本参数异常时默认返回第一个点\n    }\n\n    let minDiff = Infinity;\n    let nearestIndex = 0;\n\n    for (let i = 0; i < path.length; i++) {\n        const [lng, lat] = path[i];\n        // 计算经纬度差值的绝对值之和（不转换实际距离）\n        const diff = Math.abs(lng - position.lng) + Math.abs(lat - position.lat);\n\n        if (diff < minDiff) {\n            minDiff = diff;\n            nearestIndex = i;\n        }\n    }\n\n    return nearestIndex;\n}\n\n\n\n\nconst parkTableList = ref<object[]>([])\n\nconst parkTablePager = ref({\n    page: 1,\n    pageSize: 10,\n    total: 0,\n})\n\nconst locationTableList = ref<object[]>([])\n\nconst locationTablePager = ref({\n    page: 1,\n    pageSize: 10,\n    total: 0,\n})\n\nconst getParkTableList = async() => {\n    // TODO  停靠表  接口需要返回 list类型的data字段  和 总数据条数count字段，用于前端分页\n    // 接口入参params\n    const params = {\n        ...searchForm,\n        page: parkTablePager.value.page,\n        pageSize: parkTablePager.value.pageSize,\n\n    }\n    // 接口替换\n    const { data, total} = await paginate({\n        page: parkTablePager.value.page,\n        pageSize: parkTablePager.value.pageSize,\n        list: leftTable,\n    })\n\n    parkTableList.value = data;\n    parkTablePager.value.total = total;\n    drawMarkers()\n}\n\nconst getLocationTableList = async() => {\n    // TODO  历史轨迹  接口需要返回 list类型的data字段  和 总数据条数count字段，用于前端分页\n    // 接口入参params\n    console.log(rightTable)\n    const params = {\n        ...searchForm,\n        page: locationTablePager.value.page,\n        pageSize: locationTablePager.value.pageSize,\n\n    }\n\n    // 接口替换\n    const { data, total} = await paginate({\n        page: locationTablePager.value.page,\n        pageSize: locationTablePager.value.pageSize,\n        list: rightTable,\n    })\n\n\n    locationTableList.value = data;\n    locationTablePager.value.total = total;\n}\n\n\n\nconst handleSizeChange = (action: string, rows: number) => {\n    if(action === 'park') {\n        parkTablePager.value.page = 1;\n        parkTablePager.value.pageSize = rows;\n        getParkTableList()\n    } else {\n        locationTablePager.value.page = 1;\n        locationTablePager.value.pageSize = rows;\n    }\n\n};\nconst handleCurrentChange = (action: string, page: number) => {\n    if(action === 'park') {\n        parkTablePager.value.page = page;\n        getParkTableList()\n    } else {\n        locationTablePager.value.page = page;\n        getLocationTableList();\n    }\n};\n\n//  markers.forEach(function(marker) {\n//         new AMap.Marker({\n//             map: map,\n//             icon: marker.icon,\n//             position: [marker.position[0], marker.position[1]],\n//             offset: new AMap.Pixel(-13, -30)\n//         });\n//     });\nconst showInfoWindow = (marker) => {\n    const extData = marker.getExtData();\n    const position = marker.getPosition();\n\n    const content = `\n        <div class=\"info-window\">\n            <p><label>id：</label>${extData.id}</p>\n            <p><label>停靠时长：</label>${position.lng}, ${position.lat}</p>\n            <p><label>开始时间</label>${extData.beginTime || '无'}</p>\n            <p><label>结束时间</label>${extData.endTime || '无'}</p>\n            <p><label>位置信息：</label>${extData.location || '无'}</p>\n\n        </div>\n    `;\n\n    currentInfoWindow = new AMap.InfoWindow({\n        content,\n        offset: new AMap.Pixel(0, -30)\n    });\n\n    currentInfoWindow.open(map, position);\n};\n\nconst parkMarkers = ref<object[]>([]);\n\nconst blurIcon = 'https://a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-default.png'\nconst redIcon = 'https://a.amap.com/jsapi_demos/static/demo-center/icons/poi-marker-red.png'\n\n\nconst drawMarkers = () => {\n\n\n    parkTableList.value.forEach(item => {\n        const marker = new AMap.Marker({\n\n            map: map,\n            icon: new AMap.Icon({\n                image: blurIcon,\n                size: new AMap.Size(25, 34),\n                imageSize: new AMap.Size(25, 34),\n            }), // 使用统一的图标\n            extData: item,\n            offset: new AMap.Pixel(-13, -30),\n            position: [item.lng, item.lat],\n        });\n\n        // 添加点击事件\n        marker.on('click', () => handleMarkerClick(marker));\n        parkMarkers.value.push(marker);\n    });\n\n}\nconst hightLightMarker = ref(null); // 用于存储高亮的 Marker\nconst handleMarkerClick = currentMarker => {\n     // 清除所有高亮状态\n    const currentMarkerId = currentMarker.getExtData().id;\n    parkMarkers.value.forEach(marker => {\n        const { id } = marker.getExtData();\n        console.log('marker id', id, currentMarker.id)\n        if(id === currentMarkerId) {\n            console.log('当前点击的marker', marker)\n            if(hightLightMarker.value && hightLightMarker.value.getExtData().id === id) {\n\n                currentInfoWindow.close();\n                currentInfoWindow = null;\n                hightLightMarker.value = null;\n                marker.setIcon(new AMap.Icon({\n                    image: blurIcon,\n                    size: new AMap.Size(25, 34),\n                    imageSize: new AMap.Size(25, 34),\n                })); // 设置高亮图标\n            } else {\n                const position = marker.getPosition();\n                marker.setIcon(new AMap.Icon({\n                    image: redIcon,\n                    size: new AMap.Size(25, 34),\n                    imageSize: new AMap.Size(25, 34),\n                })); // 设置高亮图标\n                map.panTo(position,500); // 移动地图中心到车辆位置\n                hightLightMarker.value = marker;\n                setTimeout(() => {\n                    showInfoWindow(marker);\n                }, 500);\n\n            }\n\n        } else {\n\n            marker.setIcon(new AMap.Icon({\n                image: blurIcon,\n                size: new AMap.Size(25, 34),\n                imageSize: new AMap.Size(25, 34),\n            })); // 恢复默认图标\n        }\n    });\n     // 关闭现有的信息窗口\n\n\n    // // 查找并高亮匹配的 Marker\n    // for (const id in parkMarkers) {\n    //     const marker = markers[id];\n    //     const extData = marker.getExtData();\n    //     if (extData && extData.carNumber === carNumber) {\n    //         // 设置高亮图标\n    //         if (hightLightMarker.value) {\n    //             const prevExtData = hightLightMarker.value.getExtData();\n    //             if (prevExtData.carNumber && prevExtData.carNumber === carNumber && currentInfoWindow) {\n    //                 currentInfoWindow.close();\n    //                 currentInfoWindow = null;\n    //                 hightLightMarker.value = null;\n    //                 // 如果当前高亮的就是这个节点，则不做任何操作\n    //                 return;\n    //             }\n    //         }\n    //         const position = marker.getPosition();\n    //         marker.setIcon(getIcon(true));\n    //         map.panTo(position,500); // 移动地图中心到车辆位置\n    //         hightLightMarker.value = marker;\n    //         setTimeout(() => {\n    //             showInfoWindow(marker);\n    //         }, 500);\n\n    //         break;\n    //     }\n    // }\n}\n\nconst handleParkRowClick = ({ id }) => {\n\n\n    // 找到对应的标记\n    const targetMarker = parkMarkers.value.find(marker => id === marker.getExtData().id);\n    console.log('点击了停靠信息行', targetMarker);\n    if (targetMarker) {\n        // 模拟点击标记\n        handleMarkerClick(targetMarker);\n\n    }\n}\n\nconst handleLocationRowClick = row => {\n    const { lat, lng } = row;\n    if (window.marker) {\n        const currentIndex = pathData.findIndex(point =>\n            point[0] === lng && point[1] === lat\n        );\n        const remainingPath = pathData.slice(currentIndex);\n      //  isPlaying.value &&\n        map.setCenter(remainingPath[0], true)\n        window.marker.setPosition(remainingPath[0]);\n        window.passedPolyline.setPath(pathData.slice(0, currentIndex + 1));\n        if (isPlaying.value && !isPaused.value ) {\n            window.marker.stopMove();\n\n            window.marker.setPosition(remainingPath[0]);\n            if(currentIndex < pathData.length - 1) {\n                window.marker.moveAlong(remainingPath, {\n                    duration: speed.value,\n                    autoRotation: true,\n                });\n            } else {\n                progress.value = 100; // 如果点击的点是最后一个点，则设置进度为100%\n                isPlaying.value = false; // 停止播放状态\n                isPaused.value = false; // 停止暂停状态\n            }\n\n\n        }\n    }\n}\n\n\n</script>\n\n<style scoped lang=\"scss\">\n.el-tree {\n    width: 100%;\n}\n.main-content{\n    overflow: auto;\n}\n.flex-box{\n    display: flex;\n\n    position: relative;\n    justify-content: space-between;\n    .left-box {\n        margin-right: 20px;\n        display: flex;\n\n        flex-direction: column;\n\n        height: 100%;\n        .tree-card{\n\n            flex: 1;\n\n            overflow: auto;\n        }\n        .el-card {\n            border:none;\n            box-shadow: none;\n        }\n        .bottom-card {\n            flex-shrink: 0;\n            margin-top: 20px;\n        }\n        .play-box {\n            padding: 5px;\n            border: 1px solid var(--el-color-primary);\n            border-radius: 25px;\n            margin-top: 20px;\n            display: inline-flex;\n            float: right;\n            text-align: right;\n            font-size: 25px;\n            color: var(--el-color-primary);\n            .el-icon {\n                cursor: pointer;\n                margin-left: 10px;\n                &:hover {\n                    opacity: 0.7;\n                }\n            }\n            // .reset {\n            //    color: var(--el-color-danger);\n            // }\n        }\n\n    }\n\n\n    #map-container {\n        padding-left: 10px;\n        border-left: 1px solid #dcdfe6;\n        position: absolute !important;\n        top: 0px;\n        left: 270px;\n        right: 0;\n        bottom: 0;\n        width: auto !important;\n        height: auto !important;\n        background: #fff;\n            ::v-deep(.resize-icon) {\n            left: 10px;\n        }\n    }\n\n}\n\n.tool-box {\n    position: absolute;\n    right: 10px;\n    bottom: 10px;\n    border-radius: 5px;\n    background: #fff;\n    padding: 0 10px 10px;\n    .input-item {\n        margin-top: 10px;\n    }\n}\n.table-box {\n    display: flex;\n    min-height: 300px;\n    margin-top: 20px;\n    .el-card {\n        width: 50%;\n        & + .el-card {\n            margin-left: 20px;\n        }\n    }\n    .el-pagination  {\n        margin-top: 20px ;\n        text-align: right;\n    }\n}\n.main-content > .btns{\n    margin:10px 0 20px;\n}\n.search-form{\n   ::v-deep(){\n    .el-input,.el-select{\n        width: 265px !important;\n    }\n   }\n}\n\n.el-radio {\n    margin-right: 10px;\n}\n\n</style>\n\n"],"names":["paths","getPath","carTeam","paginate","list","page","pageSize","total","start","end","leftTable","rightTable","item","index","_sfc_main","_defineComponent","__props","queryVid","getIcon","ishighLight","iconPath","currentInfoWindow","ref","treeRef","reactive","pathData","map","isPaused","searchForm","progress","speed","speedRadioOptions","getCarTeam","carTeamData","nextTick","_a","handleNodeClick","_b","onMounted","handleMapResize","height","mapParentContainer","initMap","mapInstance","circleStart","circleEnd","drawMap","pathData2","lastPoint","currentIndex","findNearestPointIndex","progrss","isPlaying","passedPath","startAnimation","ElMessage","remainingPath","pauseAnimation","resumeAnimation","clearMapElements","parkMarkers","marker2","handleReset","handleSearch","dayjs","params","parkTablePager","locationTablePager","getParkTableList","getLocationTableList","data","isCarNode","watch","newSpeed","handleSpeedChange","e","currentPosition","handleProgressChange","val","handleTouchStart","path","position","minDiff","nearestIndex","i","lng","lat","diff","parkTableList","locationTableList","drawMarkers","handleSizeChange","action","rows","handleCurrentChange","showInfoWindow","extData","content","blurIcon","marker","handleMarkerClick","hightLightMarker","currentMarkerId","currentMarker","id2","redIcon","handleParkRowClick","targetMarker","handleLocationRowClick","row","point"],"mappings":"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"}