import{_ as re,d as se,b as ce,a as d,o as Ce,F as Ee,g as s,h as k,i as V,j as M,k as t,w as n,G as ge,H as Fe,l as de,I as Be,J as R,p as y,t as z,s as K,A as pe}from"./index.c4ad962b.js";import"./dayjs.ff0821f2.js";const Ae=[{id:"1",label:"\u8F66\u961F1",children:[{id:"1-1",label:"\u5DDDA12345"},{id:"1-2",label:"\u5DDDB67890"},{id:"1-3",label:"\u5DDDC54321"}]},{id:"2",label:"\u8F66\u961F2",children:[{id:"2-1",label:"\u5DDDD98765"},{id:"2-2",label:"\u5DDDE43210"}]}],L=[{id:"1",carNumber:"\u5DDDA12345",time:"2023-10-01 10:00",location:"\u6210\u90FD",content:"\u8F66\u8F86\u5DF2\u5230\u8FBE\u76EE\u7684\u5730",type:"info"},{id:"2",carNumber:"\u5DDDB67890",time:"2023-10-01 11:00",location:"\u91CD\u5E86",content:"\u8F66\u8F86\u6B63\u5728\u9014\u4E2D\uFF0C\u9884\u8BA112\u70B9\u5230\u8FBE",type:"info"},{id:"3",carNumber:"\u5DDDC54321",time:"2023-10-01 12:00",location:"\u897F\u5B89",content:"\u8F66\u8F86\u53D1\u751F\u6545\u969C\uFF0C\u5DF2\u8054\u7CFB\u7EF4\u4FEE\u4EBA\u5458",type:"danger"},{id:"4",carNumber:"\u5DDDA12345",time:"2023-10-01 10:00",location:"\u6210\u90FD",content:"\u8F66\u8F86\u5DF2\u5230\u8FBE\u76EE\u7684\u5730",type:"info"},{id:"5",carNumber:"\u5DDDB67890",time:"2023-10-01 11:00",location:"\u91CD\u5E86",content:"\u8F66\u8F86\u6B63\u5728\u9014\u4E2D\uFF0C\u9884\u8BA112\u70B9\u5230\u8FBE",type:"info"},{id:"6",carNumber:"\u5DDDC54321",time:"2023-10-01 12:00",location:"\u897F\u5B89",content:"\u8F66\u8F86\u53D1\u751F\u6545\u969C\uFF0C\u5DF2\u8054\u7CFB\u7EF4\u4FEE\u4EBA\u5458",type:"danger"},{id:"7",carNumber:"\u5DDDA12345",time:"2023-10-01 10:00",location:"\u6210\u90FD",content:"\u8F66\u8F86\u5DF2\u5230\u8FBE\u76EE\u7684\u5730",type:"info"},{id:"8",carNumber:"\u5DDDB67890",time:"2023-10-01 11:00",location:"\u91CD\u5E86",content:"\u8F66\u8F86\u6B63\u5728\u9014\u4E2D\uFF0C\u9884\u8BA112\u70B9\u5230\u8FBE",type:"info"},{id:"9",carNumber:"\u5DDDC54321",time:"2023-10-01 12:00",location:"\u897F\u5B89",content:"\u8F66\u8F86\u53D1\u751F\u6545\u969C\uFF0C\u5DF2\u8054\u7CFB\u7EF4\u4FEE\u4EBA\u5458",type:"danger"},{id:"10",carNumber:"\u5DDDB67890",time:"2023-10-01 11:00",location:"\u91CD\u5E86",content:"\u8F66\u8F86\u6B63\u5728\u9014\u4E2D\uFF0C\u9884\u8BA112\u70B9\u5230\u8FBE",type:"info"},{id:"11",carNumber:"\u5DDDC54321",time:"2023-10-01 12:00",location:"\u897F\u5B89",content:"\u8F66\u8F86\u53D1\u751F\u6545\u969C\uFF0C\u5DF2\u8054\u7CFB\u7EF4\u4FEE\u4EBA\u5458",type:"danger"}],W=({list:B,page:r,pageSize:o})=>{const h=B.length,E=(r-1)*o,i=E+o;return{data:B.slice(E,i),total:h}},me=[{id:"1-1",carNumber:"\u5DDDA12345",time:"2023-10-01 10:00",lat:30.5728,lng:104.0668,location:"\u6210\u90FD",errMsg:"\u8F66\u8F86\u53D1\u751F\u6545\u969C\uFF0C\u5DF2\u8054\u7CFB\u7EF4\u4FEE\u4EBA\u5458"},{id:"1-2",carNumber:"\u5DDDB67890",lat:30,lng:103,time:"2023-10-01 10:00",location:"\u6210\u90FD",errMsg:"\u8F66\u8F86\u53D1\u751F\u6545\u969C\uFF0C\u5DF2\u8054\u7CFB\u7EF4\u4FEE\u4EBA\u5458"},{id:"1-3",carNumber:"\u5DDDC54321",lat:31.5728,lng:105.0668,time:"2023-10-01 10:00",location:"\u6210\u90FD"},{id:"2-1",carNumber:"\u5DDDD98765",lat:32.5728,lng:106.0668,time:"2023-10-01 10:00",location:"\u6210\u90FD",errMsg:"\u8F66\u8F86\u53D1\u751F\u6545\u969C\uFF0C\u5DF2\u8054\u7CFB\u7EF4\u4FEE\u4EBA\u5458"},{id:"2-2",carNumber:"\u5DDDE43210",lat:33.5728,lng:107.0668,time:"2023-10-01 10:00",location:"\u6210\u90FD"}],De=()=>{const B=JSON.parse(JSON.stringify(me)),r=B.length,o=Math.floor(r/3),E=[...B].sort(()=>Math.random()-.5).slice(0,o);return B.forEach(i=>{if(E.some(g=>g.id===i.id)){i.errMsg="\u8F66\u8F86\u53D1\u751F\u6545\u969C\uFF0C\u5DF2\u8054\u7CFB\u7EF4\u4FEE\u4EBA\u5458",i.type="danger";const g=(Math.random()-.5)*.2,F=(Math.random()-.5)*.2;i.lng+=g,i.lat+=F}else i.errMsg=""}),B};class X{constructor(r,o){this.pollingInterval=null,this.callback=null,this.intervalTime=r,this.callback=o}start(){if(this.pollingInterval!==null){console.warn("\u8F6E\u8BE2\u5DF2\u5728\u8FD0\u884C\u4E2D\uFF0C\u65E0\u9700\u91CD\u590D\u542F\u52A8");return}if(typeof this.callback!="function"){console.error("\u65E0\u6CD5\u542F\u52A8\u8F6E\u8BE2\uFF1A\u56DE\u8C03\u51FD\u6570\u672A\u5B9A\u4E49");return}this.pollingInterval=window.setInterval(this.callback,this.intervalTime)}stop(){this.pollingInterval!==null&&(window.clearInterval(this.pollingInterval),this.pollingInterval=null)}destroy(){this.stop(),this.callback=null}updateInterval(r){if(r<=0){console.error("\u95F4\u9694\u65F6\u95F4\u5FC5\u987B\u5927\u4E8E0\u6BEB\u79D2");return}const o=this.pollingInterval!==null;this.stop(),this.intervalTime=r,o&&this.start()}}const Ie={class:"main-content"},be={class:"flex-box",id:"mapParentContainer",style:{height:"500px"}},he={class:"map-layout"},Qe={class:"table-box"},ke=se({__name:"list",setup(B){let r=null;const o={};let h=!0,E=null,i=null,g=null;const F=ce({carNumber:"",carType:""}),_=d([{label:"\u5168\u91CF\u8F66",value:1},{label:"\u4EFB\u52A1\u8F66",value:2}]),j=d([]);(()=>{j.value=Ae})();const Z=({height:u})=>{const e=document.getElementById("mapParentContainer");e.style.height=u+"px"},$=u=>{r=u,E=new X(3e3,async()=>{F.carNumber,v.value;const e=await De();ne(e,r)}),E.start()},ee=()=>{},ue=()=>{};Ce(()=>{i=new X(5e3,()=>{q()}),i.start(),Q()}),Ee(()=>{E==null||E.stop(),i==null||i.stop()});const Y=d([]),p=d({page:1,pageSize:10,total:0}),f=d([]),A=d({page:1,pageSize:10,total:0}),Q=async()=>{A.value.page,A.value.pageSize,F.carType,v.value;const{data:u,total:e}=await W({page:p.value.page,pageSize:p.value.pageSize,list:L});Y.value=u,p.value.total=e},q=async()=>{A.value.page,A.value.pageSize,F.carType,v.value;const{data:u,total:e}=await W({page:A.value.page,pageSize:A.value.pageSize,list:L.slice(0,2)});f.value=u,A.value.total=e},te=({id:u})=>{const e=f.value.findIndex(l=>l.id===u);f.value.splice(e,1),pe({type:"success",message:"\u64CD\u4F5C\u6210\u529F\uFF01"}),Q()},S=(u,e)=>{u==="histroy"?(p.value.page=1,p.value.pageSize=e,Q()):(D.value.page=1,D.value.pageSize=e)},T=(u,e)=>{u==="histroy"?(p.value.page=e,Q()):(D.value.page=e,q())},D=d({page:1,pageSize:10,total:0}),x=(u=!1)=>{const e=u?new URL("data:image/png;base64,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",self.location).href:new URL("data:image/png;base64,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",self.location).href;return new AMap.Icon({image:e,size:new AMap.Size(25,25),imageSize:new AMap.Size(25,25)})},H=d(null),ae=u=>{P(u.label)},v=d([]),le=()=>{v.value=H.value.getCheckedNodes(!1,!1),Q()},ne=(u,e)=>{u.forEach(l=>{const{id:c,lng:I,lat:m,carNumber:J,err:N}=l;if(o[c]){const b=new AMap.LngLat(I,m);o[c].setPosition(b)}else{const b=new AMap.Marker({map:e,icon:x(),position:[I,m],offset:new AMap.Pixel(-13,-30),extData:{...l}});b.on("click",()=>{P(l.carNumber)}),o[c]=b}}),h&&u.length>0&&(e.setFitView(),h=!1)},w=d(null),P=u=>{Object.values(o).forEach(e=>{e.getExtData(),e.setIcon(x())});for(const e in o){const l=o[e],c=l.getExtData();if(c&&c.carNumber===u){if(w.value){const m=w.value.getExtData();if(m.carNumber&&m.carNumber===u&&g){g.close(),g=null,w.value=null;return}}const I=l.getPosition();l.setIcon(x(!0)),r.panTo(I,500),w.value=l,setTimeout(()=>{oe(l)},500);break}}},oe=u=>{const e=u.getExtData(),l=u.getPosition(),c=`
        <div class="info-window">
            <p><label>\u8F66\u724C\u53F7\uFF1A</label>${e.carNumber}</p>
            <p><label>\u5750\u6807\uFF1A</label>${l.lng}, ${l.lat}</p>
            <p><label>\u544A\u8B66\u4FE1\u606F\uFF1A</label>${e.errMsg||"\u65E0"}</p>
            <p>
                <a  class="el-link el-link--primary " href='#/workbench/system/road?vid=${e.id}'>
                    <span class="el-link__inner">\u67E5\u770B\u8F68\u8FF9</span>
                </a>
            </p>
        </div>
    `;g=new AMap.InfoWindow({content:c,offset:new AMap.Pixel(0,-30)}),g.open(r,l)};return(u,e)=>{const l=s("el-input"),c=s("el-form-item"),I=s("el-radio"),m=s("el-radio-group"),J=s("el-form"),N=s("el-card"),b=s("MyMap"),C=s("el-table-column"),G=s("el-tag"),O=s("el-table"),U=s("el-pagination"),ie=s("el-button");return k(),V("div",Ie,[M("section",be,[t(N,{header:"\u8F66\u961F",class:"tree-card"},{default:n(()=>[t(J,{model:F},{default:n(()=>[t(c,null,{default:n(()=>[t(l,{modelValue:F.carNumber,"onUpdate:modelValue":e[0]||(e[0]=a=>F.carNumber=a),placeholder:"\u8BF7\u8F93\u5165\u8F66\u724C\u53F7",onBlur:ee},null,8,["modelValue"])]),_:1}),t(c,null,{default:n(()=>[t(m,{modelValue:F.carType,"onUpdate:modelValue":e[1]||(e[1]=a=>F.carType=a),onChange:ue},{default:n(()=>[(k(!0),V(ge,null,Fe(_.value,a=>(k(),R(I,{key:a.value,label:a.value},{default:n(()=>[y(z(a.label),1)]),_:2},1032,["label"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"]),t(de(Be),{ref_key:"treeRef",ref:H,"show-checkbox":"","node-key":"id",data:j.value,"highlight-current":!0,onNodeClick:ae,onCheckChange:le},null,8,["data"])]),_:1}),M("div",he,[t(b,{onInit:$,onResize:Z})])]),M("section",Qe,[t(N,{header:"\u5386\u53F2\u544A\u8B66\u4FE1\u606F"},{default:n(()=>[t(O,{border:"",id:"userTable",class:"table","scrollbar-always-on":!0,data:Y.value},{default:n(()=>[t(C,{prop:"carNumber",fixed:"",label:"\u8F66\u724C",width:"130"}),t(C,{prop:"time",label:"\u65F6\u95F4",width:"180"}),t(C,{prop:"location",label:"\u4F4D\u7F6E\u63CF\u8FF0",width:"180"}),t(C,{prop:"carNumber",label:"\u6D88\u606F\u7C7B\u578B",width:"180"},{default:n(a=>[a.row.content?(k(),R(G,{key:0,type:a.row.type},{default:n(()=>[y(z(a.row.type==="info"?"\u63D0\u793A\u4FE1\u606F":"\u544A\u8B66\u4FE1\u606F"),1)]),_:2},1032,["type"])):K("v-if",!0)]),_:1}),t(C,{prop:"content",label:"\u6D88\u606F\u5185\u5BB9",width:"400"})]),_:1},8,["data"]),t(U,{background:"",layout:"total,sizes,prev, pager, next,jumper",total:p.value.total,"current-page":p.value.page,"page-sizes":[10,20,50,100],"page-size":p.value.pageSize,onSizeChange:e[2]||(e[2]=a=>S("histroy",a)),onCurrentChange:e[3]||(e[3]=a=>T("histroy",a))},null,8,["total","current-page","page-size"])]),_:1}),t(N,{header:"\u5B9E\u65F6\u544A\u8B66\u4FE1\u606F"},{default:n(()=>[t(O,{border:"",id:"userTable",class:"table","scrollbar-always-on":!0,data:f.value},{default:n(()=>[t(C,{prop:"carNumber",fixed:"",label:"\u8F66\u724C",width:"130"}),t(C,{prop:"time",label:"\u65F6\u95F4",width:"180"}),t(C,{prop:"location",label:"\u4F4D\u7F6E\u63CF\u8FF0",width:"180"}),t(C,{prop:"carNumber",label:"\u6D88\u606F\u7C7B\u578B",width:"180"},{default:n(a=>[a.row.content?(k(),R(G,{key:0,type:a.row.type},{default:n(()=>[y(z(a.row.type==="info"?"\u63D0\u793A\u4FE1\u606F":"\u544A\u8B66\u4FE1\u606F"),1)]),_:2},1032,["type"])):K("v-if",!0)]),_:1}),t(C,{prop:"content",label:"\u6D88\u606F\u5185\u5BB9",width:"400"}),t(C,{prop:"carNumber",label:"\u64CD\u4F5C",width:"55px",fixed:"right"},{default:n(a=>[t(ie,{type:"text",onClick:ve=>te(a.row)},{default:n(()=>[y(" \u5DF2\u8BFB ")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),t(U,{background:"",layout:"total,sizes,prev, pager, next,jumper",total:D.value.total,"current-page":D.value.page,"page-sizes":[10,20,50,100],"page-size":D.value.pageSize,onSizeChange:e[4]||(e[4]=a=>S("realTime",a)),onCurrentChange:e[5]||(e[5]=a=>T("realTime",a))},null,8,["total","current-page","page-size"])]),_:1})])])}}});var ye=re(ke,[["__scopeId","data-v-76a1222c"]]);export{ye as default};
//# sourceMappingURL=list.131175cd.js.map
